import{p as h}from"./pako.esm-QfSfXnLH.js";function E(e){const n=window.atob(e),a=n.length,r=new Uint8Array(a);for(let s=0;s<a;s++)r[s]=n.charCodeAt(s);return r}function l(e){return e?e.replace(/[&<>"']/g,n=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[n]):""}function g(e){const n=document.getElementById("menu-content");if(n.innerHTML="",!e||e.length===0){n.innerHTML='<p class="no-items">This menu is currently empty.</p>';return}e.forEach(a=>{if(!a.name&&(!a.items||a.items.length===0))return;const r=document.createElement("div");r.className="section";let s="";a.items.forEach(o=>{if(!o.name&&!o.price)return;const t=o.image?`<img src="${o.image}" alt="${o.name}" class="menu-item-image">`:"";s+=`
                <div class="item">
                    <div class="item-details">
                        <b>${l(o.name)}</b>
                        ${o.description?`<p>${l(o.description)}</p>`:""}
                    </div>
                    <div class="item-price">${l(o.price)}</div>
                    ${t}
                </div>
            `}),r.innerHTML=`
            <h2>${l(a.name)}</h2>
            ${s}
        `,n.appendChild(r)})}function p(){let e;const n=window.location.hash.substring(1);if(n.startsWith("data=")?e=n.substring(5):e=new URLSearchParams(window.location.search).get("data"),e)try{const t=e.replace(/-/g,"+").replace(/_/g,"/"),m="=".repeat((4-t.length%4)%4),f=E(t+m),y=h.inflate(f,{to:"string"}),i=JSON.parse(y),d=document.getElementById("menu-title");if(i.v===2&&i.menu)d.textContent=i.menu.title||"Our Menu",g(i.menu.sections);else{const c=i.menu||i;d.textContent="Our Menu",g(c)}if(i.meta){const c=document.getElementById("generation-date"),u=document.getElementById("reference-id");c&&u&&i.meta.ts&&(c.textContent=i.meta.ts,u.textContent=i.meta.eid||"")}}catch(t){console.error("Failed to load or render menu:",t);const m=document.getElementById("menu-content");m.innerHTML='<p class="error">Could not load menu. The link may be invalid.</p>'}else{const t=document.getElementById("menu-content");t.innerHTML='<p class="error">No menu data found in the URL.</p>'}const a=document.getElementById("image-modal"),r=document.getElementById("modal-image"),s=document.querySelector(".modal-close");document.getElementById("menu-content").addEventListener("click",function(t){t.target.classList.contains("menu-item-image")&&(a.style.display="flex",r.src=t.target.src)});function o(){a.style.display="none"}s.addEventListener("click",o),a.addEventListener("click",function(t){t.target===a&&o()})}window.addEventListener("message",e=>{if(e.data&&e.data.type==="loadMenu"){const n=e.data.url;window.location.hash=new URL(n).hash,p()}});p();
