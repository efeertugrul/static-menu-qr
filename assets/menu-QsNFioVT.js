import{p as f}from"./pako.esm-BpSz_pCI.js";import{r as u}from"./renderer-Cp9WJrM7.js";function h(t){const n=window.atob(t),o=n.length,c=new Uint8Array(o);for(let a=0;a<o;a++)c[a]=n.charCodeAt(a);return c}function E(t){var n,o,c;return t?{title:t.t,theme:{primaryColor:(n=t.th)==null?void 0:n.pc,textColor:(o=t.th)==null?void 0:o.tc,fontFamily:(c=t.th)==null?void 0:c.ff},sections:(t.s||[]).map(a=>({name:a.n,items:(a.i||[]).map(s=>({name:s.n,price:s.p,description:s.d,image:s.img,tags:s.tg}))}))}:null}function g(){let t;const n=window.location.hash.substring(1);if(n.startsWith("data=")?t=n.substring(5):t=new URLSearchParams(window.location.search).get("data"),t)try{const e=t.replace(/-/g,"+").replace(/_/g,"/"),i="=".repeat((4-e.length%4)%4),p=h(e+i),y=f.inflate(p,{to:"string"}),r=JSON.parse(y),d=document.getElementById("menu-container");if(r.v===2&&r.menu){const l=E(r.menu);u(d,l)}else{const l=r.menu||r;u(d,{title:"Our Menu",sections:l})}if(r.meta){const l=document.getElementById("generation-date"),m=document.getElementById("reference-id");l&&m&&r.meta.ts&&(l.textContent=r.meta.ts,m.textContent=r.meta.eid||"")}}catch(e){console.error("Failed to load or render menu:",e);const i=document.getElementById("menu-content");i.innerHTML='<p class="error">Could not load menu. The link may be invalid.</p>'}else{const e=document.getElementById("menu-content");e.innerHTML='<p class="error">No menu data found in the URL.</p>'}const o=document.getElementById("image-modal"),c=document.getElementById("modal-image"),a=document.querySelector(".modal-close");document.getElementById("menu-content").addEventListener("click",function(e){e.target.classList.contains("menu-item-image")&&(o.style.display="flex",c.src=e.target.src)});function s(){o.style.display="none"}a.addEventListener("click",s),o.addEventListener("click",function(e){e.target===o&&s()})}window.addEventListener("message",t=>{if(t.data&&t.data.type==="loadMenu"){const n=t.data.url;window.location.hash=new URL(n).hash,g()}});g();
